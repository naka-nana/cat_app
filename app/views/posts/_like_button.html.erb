<%= turbo_frame_tag "like_button_#{post.id}" do %>
  <div class="like-button-wrapper">
    <% if !user_signed_in? %>
      <%= link_to new_user_session_path, class: "like-button login-required" do %>
        <i class="fa-solid fa-cat"></i> ログインしていいね
      <% end %>

    <% elsif current_user.id == post.user_id %>
      <%# 自分の投稿。ボタンを出さない or 文言だけ %>
      <%# 例: <span class="my-post-note">自分の投稿</span> %>

    <% elsif post.likes.exists?(user_id: current_user.id) %>
      <%= button_to post_like_path(post),
                    method: :delete,
                    form: { data: { turbo: "true" } },
                    class: "like-button liked" do %>
        <i class="fa-solid fa-cat"></i> いいね解除
      <% end %>

    <% else %>
      <%= button_to post_like_path(post),
                    method: :post,
                    form: { data: { turbo: "true" } },
                    class: "like-button" do %>
        <i class="fa-solid fa-cat"></i> いいね
      <% end %>
    <% end %>
  </div>
<% end %>
